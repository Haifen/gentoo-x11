From 7a4105185fb79730b00c2a83758c532805bac0f8 Mon Sep 17 00:00:00 2001
From: =?utf-8?q?Michel=20D=C3=A4nzer?= <michel@tungstengraphics.com>
Date: Thu, 1 May 2008 15:10:52 +0200
Subject: [PATCH 10/37] EXA: Fall back in CompositeRects if the driver can't accelerate Composite.

Fixes http://bugs.freedesktop.org/show_bug.cgi?id=15780 .
(cherry picked from commit 3b8d53452cd6c74d32d7759964a7cd9ee775f161)
---
 exa/exa_render.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/exa/exa_render.c b/exa/exa_render.c
index 43b0029..b480c6d 100644
--- a/exa/exa_render.c
+++ b/exa/exa_render.c
@@ -345,6 +345,9 @@ exaTryDriverCompositeRects(CARD8	       op,
     struct _Pixmap scratch;
     ExaMigrationRec pixmaps[2];
 
+    if (!pExaScr->info->PrepareComposite)
+	return -1;
+
     pSrcPix = exaGetDrawablePixmap(pSrc->pDrawable);
     pSrcExaPix = ExaGetPixmapPriv(pSrcPix);
 
-- 
1.6.0.2

