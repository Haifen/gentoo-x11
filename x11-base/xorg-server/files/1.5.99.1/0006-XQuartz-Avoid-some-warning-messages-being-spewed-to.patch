From e9ee5d4f61794d8d12109b44daa92868cb834954 Mon Sep 17 00:00:00 2001
From: Jeremy Huddleston <jeremyhu@freedesktop.org>
Date: Fri, 28 Nov 2008 11:18:14 -0800
Subject: [PATCH] XQuartz: Avoid some warning messages being spewed to system.log by AppKit
 (cherry picked from commit 780eff230ce41ad785e54d61a82c731269ae0446)

---
 hw/xquartz/X11Application.m |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/hw/xquartz/X11Application.m b/hw/xquartz/X11Application.m
index 44b8418..9b34426 100644
--- a/hw/xquartz/X11Application.m
+++ b/hw/xquartz/X11Application.m
@@ -964,7 +964,9 @@ extern int darwin_modifier_flags; // darwinEvents.c
         handle_mouse:
             pDev = darwinPointer;
 
-            if([e subtype] == NSTabletProximityEventSubtype) {
+            /* NSTabletPoint can have no subtype */
+            if([e type] != NSTabletPoint &&
+               [e subtype] == NSTabletProximityEventSubtype) {
                 switch([e pointingDeviceType]) {
                     case NSEraserPointingDevice:
                         darwinTabletCurrent=darwinTabletEraser;
-- 
1.6.0.4

